name: Test
inputs:
  environ:
    required: true
runs:
  using: "composite"

  steps:
    - name: Print title
      run: echo "Testing on $APP_ENV"
      shell: bash
      env:
        APP_ENV: ${{ inputs.environ }}

    - name: get mocha
      run: git clone https://github.com/mtararujs/course-js-api-framework mocha
      shell: bash

    - name: install npm dependencies
      working-directory: mocha
      run: npm install
      shell: bash

    - name: run tests
      working-directory: mocha
      run: npm run greetings greetings_$APP_ENV
      shell: bash
      env:
        APP_ENV: ${{ inputs.environ }}
